<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ íŠœë¸Œ ì¸ë„¤ì¼ ì¶”ì¶œê¸° - ê³ í™”ì§ˆ ë‹¤ìš´ë¡œë“œ</title>
    
    <link rel="stylesheet" href="css/style.css">
    <script src="js/common.js"></script>

    <style>
        .input-area { display: flex; gap: 10px; margin-bottom: 30px; }
        .input-area input { flex: 1; padding: 15px; font-size: 16px; border: 2px solid #ddd; border-radius: 5px; }
        .input-area button { padding: 15px 30px; font-size: 16px; font-weight: bold; background-color: #e74c3c; } /* ìœ íŠœë¸Œ ë ˆë“œ ì»¬ëŸ¬ */
        .input-area button:hover { background-color: #c0392b; }

        .thumbnail-list { display: none; flex-direction: column; gap: 40px; }
        .thumb-item { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; }
        .thumb-item h3 { margin-top: 0; color: #333; }
        .thumb-item img { max-width: 100%; height: auto; border-radius: 5px; margin: 15px 0; border: 1px solid #eee; }
        
        .download-btn {
            display: inline-block; padding: 10px 20px; background-color: #3498db; color: white; 
            text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 5px;
        }
        .download-btn:hover { background-color: #2980b9; }

        @media (max-width: 768px) {
            .input-area { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tool-box">
            <h2 style="text-align: center;">ğŸ“º ìœ íŠœë¸Œ ì¸ë„¤ì¼ ì¶”ì¶œê¸°</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                ì˜ìƒ ì£¼ì†Œë§Œ ì…ë ¥í•˜ë©´ ê³ í™”ì§ˆ ì¸ë„¤ì¼ì„ ë°”ë¡œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>

            <div class="input-area">
                <input type="text" id="youtubeUrl" placeholder="ì˜ˆ: https://www.youtube.com/watch?v=..." onkeyup="if(window.event.keyCode==13){extract()}">
                <button onclick="extract()">ì¶”ì¶œí•˜ê¸°</button>
            </div>

            <div id="resultArea" class="thumbnail-list">
                
                <div class="thumb-item">
                    <h3>ğŸŒŸ ìµœëŒ€ ê³ í™”ì§ˆ (Max Resolution)</h3>
                    <p>ê°€ì¥ í’ˆì§ˆì´ ì¢‹ì€ ì´ë¯¸ì§€ì…ë‹ˆë‹¤. (4K/HD ì§€ì› ì˜ìƒë§Œ ê°€ëŠ¥)</p>
                    <img id="imgMax" src="" alt="ì¸ë„¤ì¼ ì—†ìŒ">
                    <br>
                    <a id="btnMax" href="#" target="_blank" class="download-btn" download>ì´ë¯¸ì§€ ì €ì¥ (ìƒˆì°½ ì—´ê¸°)</a>
                </div>

                <div class="thumb-item">
                    <h3>ğŸ“· í‘œì¤€ í™”ì§ˆ (Standard)</h3>
                    <p>ëŒ€ë¶€ë¶„ì˜ ì˜ìƒì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” í™”ì§ˆì…ë‹ˆë‹¤. (640x480)</p>
                    <img id="imgStd" src="" alt="ì¸ë„¤ì¼ ì—†ìŒ">
                    <br>
                    <a id="btnStd" href="#" target="_blank" class="download-btn" download>ì´ë¯¸ì§€ ì €ì¥ (ìƒˆì°½ ì—´ê¸°)</a>
                </div>

                <div class="thumb-item">
                    <h3>ğŸ“± ì¤‘ê°„ í™”ì§ˆ (Medium)</h3>
                    <p>ë¸”ë¡œê·¸ ë³¸ë¬¸ì´ë‚˜ ì‘ì€ ë¯¸ë¦¬ë³´ê¸°ì— ì í•©í•©ë‹ˆë‹¤. (320x180)</p>
                    <img id="imgMed" src="" alt="ì¸ë„¤ì¼ ì—†ìŒ">
                    <br>
                    <a id="btnMed" href="#" target="_blank" class="download-btn" download>ì´ë¯¸ì§€ ì €ì¥ (ìƒˆì°½ ì—´ê¸°)</a>
                </div>

            </div>
        </div>

        <div style="margin-top: 50px; line-height: 1.6; color: #444;">
            <h3>ì‚¬ìš© íŒ</h3>
            <p>ìœ íŠœë¸Œ ì˜ìƒ ë§í¬(URL)ë¥¼ ë³µì‚¬í•´ì„œ ìœ„ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”. 
            <code>youtu.be</code>, <code>youtube.com/watch?v=</code> ë“± ëª¨ë“  í˜•ì‹ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
        </div>
    </div>

    <script>
        function extract() {
            const url = document.getElementById('youtubeUrl').value.trim();
            const resultArea = document.getElementById('resultArea');
            
            if (!url) return alert("ìœ íŠœë¸Œ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            // 1. ì˜ìƒ ID ì¶”ì¶œ (ì •ê·œí‘œí˜„ì‹)
            // ì§€ì› í˜•ì‹: youtube.com/watch?v=ID, youtu.be/ID, youtube.com/embed/ID ë“±
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            
            if (match && match[7].length == 11) {
                const videoId = match[7];

                // 2. ì´ë¯¸ì§€ URL ìƒì„±
                // ìœ íŠœë¸Œ ì¸ë„¤ì¼ ì„œë²„ ì£¼ì†Œ ê·œì¹™: https://img.youtube.com/vi/[ID]/[í™”ì§ˆ].jpg
                const maxRes = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
                const stdRes = `https://img.youtube.com/vi/${videoId}/sddefault.jpg`;
                const medRes = `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;

                // 3. í™”ë©´ì— ë¿Œë¦¬ê¸°
                updateImage('imgMax', 'btnMax', maxRes);
                updateImage('imgStd', 'btnStd', stdRes);
                updateImage('imgMed', 'btnMed', medRes);

                resultArea.style.display = 'flex';
            } else {
                alert("ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ ì£¼ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
                resultArea.style.display = 'none';
            }
        }

        function updateImage(imgId, btnId, src) {
            const img = document.getElementById(imgId);
            const btn = document.getElementById(btnId);

            img.src = src;
            btn.href = src; // ë‹¤ìš´ë¡œë“œ ë§í¬ ì—°ê²°
            
            // ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ (ì˜ˆ: ê³ í™”ì§ˆì´ ì—†ëŠ” ì˜›ë‚  ì˜ìƒ) ì²˜ë¦¬
            img.onerror = function() {
                this.src = "https://via.placeholder.com/640x360?text=No+Image";
                btn.style.display = 'none'; // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìˆ¨ê¹€
            };
            btn.style.display = 'inline-block'; // ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
        }
    </script>
</body>
</html>