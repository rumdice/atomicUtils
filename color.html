<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸° - Color Converter</title>
    
    <link rel="stylesheet" href="css/style.css">
    <script src="js/common.js"></script>

    <style>
        .color-converter-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .color-preview {
            width: 100%;
            height: 150px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .color-formats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .format-box {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #eee;
        }

        .format-box label {
            display: block;
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .format-box input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
            font-family: 'Consolas', monospace;
            box-sizing: border-box;
        }

        .format-box input:focus {
            border-color: #3498db;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .button-group button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-success {
            background-color: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background-color: #229954;
        }

        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .info-section {
            margin-top: 40px;
            line-height: 1.8;
            color: #444;
        }

        @media (max-width: 768px) {
            .color-formats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tool-box color-converter-container">
            <h2 style="text-align: center;">ğŸ¨ ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ê¸°</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                HEX, RGB, HSL ìƒ‰ìƒ ì½”ë“œë¥¼ ì„œë¡œ ë³€í™˜í•˜ê³  ë¯¸ë¦¬ë³´ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”.
            </p>

            <!-- ìƒ‰ìƒ ë¯¸ë¦¬ë³´ê¸° -->
            <div class="color-preview" id="colorPreview">
                #3498db
            </div>

            <!-- ìƒ‰ìƒ í˜•ì‹ ì…ë ¥ -->
            <div class="color-formats">
                <div class="format-box">
                    <label>HEX (#RRGGBB)</label>
                    <input type="text" id="hexInput" placeholder="#3498db" 
                           oninput="convertFromHex()" maxlength="7">
                </div>

                <div class="format-box">
                    <label>RGB (R, G, B)</label>
                    <input type="text" id="rgbInput" placeholder="52, 152, 219" 
                           oninput="convertFromRGB()">
                </div>

                <div class="format-box">
                    <label>HSL (H, S%, L%)</label>
                    <input type="text" id="hslInput" placeholder="204, 70%, 53%" 
                           oninput="convertFromHSL()">
                </div>

                <div class="format-box">
                    <label>RGB ê°’ (0-255)</label>
                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                        <input type="number" id="rInput" placeholder="R" min="0" max="255" 
                               oninput="convertFromRGBSliders()" style="flex: 1;">
                        <input type="number" id="gInput" placeholder="G" min="0" max="255" 
                               oninput="convertFromRGBSliders()" style="flex: 1;">
                        <input type="number" id="bInput" placeholder="B" min="0" max="255" 
                               oninput="convertFromRGBSliders()" style="flex: 1;">
                    </div>
                </div>
            </div>

            <!-- ë²„íŠ¼ ê·¸ë£¹ -->
            <div class="button-group">
                <button class="btn-primary" onclick="copyHex()">ğŸ“‹ HEX ë³µì‚¬</button>
                <button class="btn-primary" onclick="copyRGB()">ğŸ“‹ RGB ë³µì‚¬</button>
                <button class="btn-primary" onclick="copyHSL()">ğŸ“‹ HSL ë³µì‚¬</button>
                <button class="btn-danger" onclick="randomColor()">ğŸ² ëœë¤ ìƒ‰ìƒ</button>
            </div>
        </div>

        <div class="info-section">
            <h3>ìƒ‰ìƒ ì½”ë“œ ë³€í™˜ì´ë€?</h3>
            <p>
                ì›¹ ê°œë°œì—ì„œ ìƒ‰ìƒì„ í‘œí˜„í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:
            </p>
            <ul>
                <li><strong>HEX:</strong> 16ì§„ìˆ˜ë¡œ í‘œí˜„ (#RRGGBB í˜•ì‹). ì˜ˆ: #3498db</li>
                <li><strong>RGB:</strong> ë¹¨ê°•, ì´ˆë¡, íŒŒë‘ ê°’ì„ 0-255ë¡œ í‘œí˜„. ì˜ˆ: rgb(52, 152, 219)</li>
                <li><strong>HSL:</strong> ìƒ‰ìƒ(Hue), ì±„ë„(Saturation), ëª…ë„(Lightness)ë¡œ í‘œí˜„. ì˜ˆ: hsl(204, 70%, 53%)</li>
            </ul>
            <p>
                ì´ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ í•œ í˜•ì‹ì˜ ìƒ‰ìƒ ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ ë‹¤ë¥¸ í˜•ì‹ìœ¼ë¡œ ìë™ ë³€í™˜ë˜ì–´ í‘œì‹œë©ë‹ˆë‹¤.
            </p>
        </div>
    </div>

    <script>
        let isUpdating = false; // ë¬´í•œ ë£¨í”„ ë°©ì§€ í”Œë˜ê·¸

        // HEXì—ì„œ ë³€í™˜
        function convertFromHex() {
            if (isUpdating) return;
            isUpdating = true;

            const hex = document.getElementById('hexInput').value.trim();
            if (!hex) {
                isUpdating = false;
                return;
            }

            // # ì œê±° ë° ê²€ì¦
            let hexClean = hex.replace('#', '');
            if (hexClean.length !== 6 || !/^[0-9A-Fa-f]{6}$/.test(hexClean)) {
                isUpdating = false;
                return;
            }

            // RGBë¡œ ë³€í™˜
            const r = parseInt(hexClean.substr(0, 2), 16);
            const g = parseInt(hexClean.substr(2, 2), 16);
            const b = parseInt(hexClean.substr(4, 2), 16);

            updateAllFormats(r, g, b);
            isUpdating = false;
        }

        // RGB ë¬¸ìì—´ì—ì„œ ë³€í™˜ (ì˜ˆ: "52, 152, 219")
        function convertFromRGB() {
            if (isUpdating) return;
            isUpdating = true;

            const rgbStr = document.getElementById('rgbInput').value.trim();
            const match = rgbStr.match(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);
            
            if (match) {
                const r = parseInt(match[1]);
                const g = parseInt(match[2]);
                const b = parseInt(match[3]);
                
                if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {
                    updateAllFormats(r, g, b);
                }
            }
            isUpdating = false;
        }

        // RGB ìŠ¬ë¼ì´ë”ì—ì„œ ë³€í™˜
        function convertFromRGBSliders() {
            if (isUpdating) return;
            isUpdating = true;

            const r = parseInt(document.getElementById('rInput').value) || 0;
            const g = parseInt(document.getElementById('gInput').value) || 0;
            const b = parseInt(document.getElementById('bInput').value) || 0;

            updateAllFormats(r, g, b);
            isUpdating = false;
        }

        // HSLì—ì„œ ë³€í™˜
        function convertFromHSL() {
            if (isUpdating) return;
            isUpdating = true;

            const hslStr = document.getElementById('hslInput').value.trim();
            const match = hslStr.match(/(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%/);
            
            if (match) {
                const h = parseInt(match[1]) / 360;
                const s = parseInt(match[2]) / 100;
                const l = parseInt(match[3]) / 100;

                const rgb = hslToRgb(h, s, l);
                updateAllFormats(rgb.r, rgb.g, rgb.b);
            }
            isUpdating = false;
        }

        // HSLì„ RGBë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function hslToRgb(h, s, l) {
            let r, g, b;

            if (s === 0) {
                r = g = b = l; // ë¬´ì±„ìƒ‰
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };

                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }

            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        // RGBë¥¼ HSLë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0; // ë¬´ì±„ìƒ‰
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        // ëª¨ë“  í˜•ì‹ ì—…ë°ì´íŠ¸
        function updateAllFormats(r, g, b) {
            // HEX ì—…ë°ì´íŠ¸
            const hex = '#' + [r, g, b].map(x => {
                const hex = x.toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
            document.getElementById('hexInput').value = hex.toUpperCase();

            // RGB ë¬¸ìì—´ ì—…ë°ì´íŠ¸
            document.getElementById('rgbInput').value = `${r}, ${g}, ${b}`;

            // RGB ìŠ¬ë¼ì´ë” ì—…ë°ì´íŠ¸
            document.getElementById('rInput').value = r;
            document.getElementById('gInput').value = g;
            document.getElementById('bInput').value = b;

            // HSL ì—…ë°ì´íŠ¸
            const hsl = rgbToHsl(r, g, b);
            document.getElementById('hslInput').value = `${hsl.h}, ${hsl.s}%, ${hsl.l}%`;

            // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
            const preview = document.getElementById('colorPreview');
            preview.style.backgroundColor = hex;
            preview.innerText = hex;
            
            // í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì¡°ì • (ë°ì€ ë°°ê²½ì¼ ë•ŒëŠ” ê²€ì€ìƒ‰)
            const brightness = (r * 299 + g * 587 + b * 114) / 1000;
            preview.style.color = brightness > 128 ? '#000' : '#fff';
        }

        // ë³µì‚¬ í•¨ìˆ˜ë“¤
        function copyHex() {
            const hex = document.getElementById('hexInput').value;
            navigator.clipboard.writeText(hex).then(() => {
                alert('HEX ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function copyRGB() {
            const rgb = document.getElementById('rgbInput').value;
            navigator.clipboard.writeText(`rgb(${rgb})`).then(() => {
                alert('RGB ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function copyHSL() {
            const hsl = document.getElementById('hslInput').value;
            navigator.clipboard.writeText(`hsl(${hsl})`).then(() => {
                alert('HSL ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        // ëœë¤ ìƒ‰ìƒ ìƒì„±
        function randomColor() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            updateAllFormats(r, g, b);
        }

        // ì´ˆê¸°í™”: ê¸°ë³¸ ìƒ‰ìƒ ì„¤ì •
        window.addEventListener('DOMContentLoaded', () => {
            updateAllFormats(52, 152, 219); // #3498db
        });
    </script>
</body>
</html>
